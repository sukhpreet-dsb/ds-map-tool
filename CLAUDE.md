# Claude Code Configuration

This project uses Claude Code with the following MCP (Model Context Protocol) servers configured:

## Available MCP Servers

### Context7

- **Transport**: HTTP
- **URL**: https://mcp.context7.com/mcp
- **Description**: Context7 integration for enhanced context management

### Chrome DevTools

- **Transport**: stdio
- **Command**: npx chrome-devtools-mcp@latest
- **Description**: Chrome DevTools integration for web development and debugging

## Usage

These MCP servers provide additional capabilities to Claude Code for this project. You can use them through the standard Claude Code interface.

- Use Context7 to check up-to-date docs when needed for implementing new libraries or frameworks, or adding features using them.

## Project Overview

This is a **DS Map Tool** - a web-based map editor application built with React and OpenLayers.

### Technology Stack
- **Frontend**: React + TypeScript + Vite
- **Map Library**: OpenLayers (v10.6.1)
- **Styling**: Tailwind CSS
- **UI Icons**: Lucide React
- **Build Tool**: Vite

### Key Features
- Interactive map with OSM and satellite view toggle
- Drawing tools (Point, Polyline, Freehand line)
- File import/export support (GeoJSON, KML, KMZ)
- Tool selection system with toolbar
- Feature selection and deletion
- Smooth map view transitions
- Advanced legends system with text labels
- Configurable dash patterns and text styling

### Architecture
- `src/components/MapEditor.tsx` - Main map component with OpenLayers integration
- `src/components/ToolBar.tsx` - Toolbar for tool selection
- `src/components/LegendDropdown.tsx` - Legend selection dropdown component
- `src/tools/legendsConfig.ts` - Legend configurations and styling definitions
- `src/tools/toolConfig.ts` - Tool configuration and definitions
- `src/components/MapViewToggle.tsx` - Map view switcher component
- `src/components/LoadingOverlay.tsx` - Loading overlay for transitions

### Available Tools
- **Select**: Select and modify features
- **Hand**: Pan navigation mode
- **Point**: Place point markers
- **Polyline**: Draw straight lines
- **Line**: Draw line segments
- **Freehand**: Freehand drawing
- **Legends**: Draw legends with text labels (legend11, legend12, legend13)

### Legend System
The application includes an advanced legends system with configurable text styling:

**Available Legends:**
- **Legend 11**: Red dashed lines with "OIL" text
- **Legend 12**: Yellow dashed lines with "HW" text
- **Legend 13**: Cyan dashed lines with "GAS" text

**Legend Configuration:**
- Dash pattern: 16px dash, 20px gap
- Text repeat: 36px (aligned with dash cycle)
- Configurable fonts, colors, and styling
- Mathematical text alignment for consistent positioning

**Implementation:**
- Reusable `getTextAlongLineStyle()` function for text rendering
- Dynamic repeat calculation based on dash patterns
- Consistent text centering across all legends
- Support for custom text properties via `legendsConfig.ts`

### Development
- Run development server: `npm run dev`
- Build for production: `npm run build`
- TypeScript compilation: `npm run build` (includes type checking)

### Recent Enhancements
- **Legend Text Centering**: Implemented mathematical text alignment for consistent positioning in dash segments
- **Configurable Gaps**: Updated all legends to use 20px gaps (from 12px) for better readability
- **Reusable Architecture**: Created DRY legend styling system that works across all legend types
- **Dynamic Repeat Calculation**: Text repeat automatically aligns with dash pattern cycles
- **Enhanced Text Styling**: Support for custom fonts, colors, strokes, and positioning per legend

### Code Organization
- **DRY Principle**: Single `getTextAlongLineStyle()` function handles all text rendering
- **Configuration-Driven**: Legend properties defined in `legendsConfig.ts` for easy maintenance
- **Type Safety**: Full TypeScript support with proper interfaces and type checking
- **Modular Design**: Clear separation between rendering logic, configuration, and UI components

---

_This file was generated by Claude Code_
